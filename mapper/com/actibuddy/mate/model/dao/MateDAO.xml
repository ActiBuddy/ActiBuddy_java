<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="MateDAO">

 <resultMap type="com.actibuddy.mate.model.dto.MateReviewDTO" id="mateReviewResultMap">
		<id property="num" column="MT_REVIEW_NUM"/>
		<result property="title" column="MT_REVIEW_TITLE"/>
		<result property="img1" column="MT_REVIEW_IMG1"/>
		<result property="img2" column="MT_REVIEW_IMG2"/>
		<result property="img3" column="MT_REVIEW_IMG3"/>
		<result property="content" column="MT_REVIEW_CON"/>
		<result property="date" column="MT_REVIEW_DATE"/>
		<result property="repYn" column="MT_REVIEW_REP_YN"/>
		<result property="userId" column="USER_ID"/>
	</resultMap>

	<!-- 메이트 후기 페이징 -->
	<select id="selectTotalCount" resultType="_int" parameterType="hashMap">
		SELECT
				COUNT(*)
		  FROM MT_REVIEW;
	</select>	
	
	<!-- 메이트 전체 조회 -->
	<select id="selectAllNoticeList" resultMap="mateReviewResultMap">
		SELECT
			  A.MT_REVIEW_NUM
		    , A.MT_REVIEW_TITLE
			, A.MT_REVIEW_IMG1
			, A.MT_REVIEW_CON
			, A.MT_REVIEW_DATE
			, A.MT_REVIEW_REP_YN
			, A.USER_ID
			, A.MT_REVIEW_IMG2
			, A.MT_REVIEW_IMG3
		FROM MT_REVIEW
	   ORDER BY A.NOTICE_NO DESC
	</select>

	<!-- 메이트 후기 작성 -->
	<insert id="insertReview">
		INSERT
		  INTO MT_REVIEW A
		(
		  A.MT_REVIEW_NUM
		, A.MT_REVIEW_TITLE
		, A.MT_REVIEW_IMG1
		, A.MT_REVIEW_CON
		, A.MT_REVIEW_DATE
		, A.MT_REVIEW_REP_YN
		, A.USER_ID
		, A.MT_REVIEW_IMG2
		, A.MT_REVIEW_IMG3
		)
		VALUES
		(
		  'MT_REVIEW' || SEQ_ACTI_REVIEW_NUM.NEXTVAL
        , #{ title }
        , #{ img1 }
        , #{ content }
        , default
        , #{ repYn }
        , #{ userId } 
        , #{ img2 }
        , #{ img3 }
		)

	</insert>

</mapper>
