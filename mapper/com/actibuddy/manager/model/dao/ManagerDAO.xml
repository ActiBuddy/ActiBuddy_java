<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="ManagerDAO">
 <resultMap type="com.actibuddy.manager.model.dto.ManagerDTO" id="memberResultMap">
		<id property="userId" column="USER_ID"/>
		<result property="userName" column="USER_NAME"/>
		<result property="pwd" column="PASSWORD"/>
		<result property="email" column="EMAIL"/>
		<result property="birth" column="BIRTH"/>
		<result property="gender" column="GENDER"/>
		<result property="warn_count" column="WARN_COUNT"/>
		<result property="quitYn" column="QUIT_YN"/>
		<result property="memType" column="MEM_TYPE"/>
		<result property="memPhone" column="MEM_PHONE"/>
		<result property="introduce" column="INTRODUCE"/>
		<result property="favoriteActi" column="FAVORITE_ACTI"/>
		<result property="enterDate" column="ENTER_DATE"/>
		</resultMap>
 
 <resultMap type="com.actibuddy.manager.model.dto.ManagerPartDTO" id="managerPartResultMap">
		<id property="userId" column="USER_ID"/>
		<result property="userName" column="USER_NAME"/>
		<result property="pwd" column="PASSWORD"/>
		<result property="email" column="EMAIL"/>
		<result property="birth" column="BIRTH"/>
		<result property="gender" column="GENDER"/>
		<result property="warn_count" column="WARN_COUNT"/>
		<result property="quitYn" column="QUIT_YN"/>
		<result property="memType" column="MEM_TYPE"/>
		<result property="memPhone" column="MEM_PHONE"/>
		<result property="introduce" column="INTRODUCE"/>
		<result property="favoriteActi" column="FAVORITE_ACTI"/>
		<result property="manPart" column="MAN_PART"/>
		</resultMap>
		
	<!-- <resultMap type="com.actibuddy.manager.model.dto.ManagerDTO" id="memberResultMap">
		<id property="userId" column="USER_ID"/>
		<result property="userName" column="USER_NAME"/>
		<result property="pwd" column="PASSWORD"/>
		<result property="email" column="EMAIL"/>
		<result property="birth" column="BIRTH"/>
		<result property="gender" column="GENDER"/>
		<result property="warn_count" column="WARN_COUNT"/>
		<result property="quitYn" column="QUIT_YN"/>
		<result property="memType" column="MEM_TYPE"/>
		<result property="memPhone" column="MEM_PHONE"/>
		<result property="introduce" column="INTRODUCE"/>
		<result property="favoriteActi" column="FAVORITE_ACTI"/>
		<result property="enterDate" column="ENTER_DATE"/>
		</resultMap> -->

 
 <select id="selectLoginMember" resultMap="memberResultMap">
		
		SELECT
			    A.USER_ID
        	  , A.USER_NAME
    	      , A.PASSWORD
        	  , A.EMAIL
        	  , A.BIRTH
       	  	  , A.GENDER
        	  , A.WARN_COUNT
        	  , A.QUIT_YN
        	  , A.MEM_TYPE
       	      , A.MEM_PHONE        
		 FROM  MEMBER A
		WHERE  A.QUIT_YN = 'N'
		  AND  A.USER_ID = #{ userId }
	</select>
	
	
	<select id="selectAllMember" resultMap="memberResultMap">
		
		SELECT
			    A.USER_ID
        	  , A.USER_NAME
        	  , A.EMAIL
        	  , A.BIRTH
       	  	  , A.GENDER
        	  , A.WARN_COUNT
        	  , A.QUIT_YN
        	  , A.MEM_TYPE
       	      , A.MEM_PHONE
       	      , A.ENTER_DATE
		 FROM  MEMBER A
		WHERE MEM_TYPE = 'U'
	</select>
	
	<select id="selectPartnerMember" resultMap="memberResultMap">
		
		SELECT
			    A.USER_ID
        	  , A.USER_NAME
        	  , A.EMAIL
        	  , A.BIRTH
       	  	  , A.GENDER
        	  , A.WARN_COUNT
        	  , A.QUIT_YN
        	  , A.MEM_TYPE
       	      , A.MEM_PHONE
       	      , A.ENTER_DATE
		 FROM  MEMBER A
		WHERE MEM_TYPE = 'P'
	</select>
	
 
 	<select id="selectWarnMember" resultMap="memberResultMap">
		
		SELECT
			    A.USER_ID
        	  , A.USER_NAME
        	  , A.EMAIL
        	  , A.BIRTH
       	  	  , A.GENDER
        	  , A.WARN_COUNT
        	  , A.QUIT_YN
        	  , A.MEM_TYPE
       	      , A.MEM_PHONE        
		 FROM  MEMBER A
		 WHERE  A.MEM_TYPE IN ('U','P')
       		AND  A.WARN_COUNT > 0
     <!--    ORDER BY A.WARN_COUNT DESC -->
		 </select>  
		  
		  
	<select id="selectManagerMember" resultMap="managerPartResultMap">
		
		SELECT
			    A.USER_ID
        	  , A.USER_NAME
        	  , A.EMAIL
        	  , A.BIRTH
       	  	  , A.GENDER
        	  , A.WARN_COUNT
        	  , A.QUIT_YN
        	  , A.MEM_TYPE
       	      , A.MEM_PHONE
       	      , M.MAN_PART        
		 FROM MEMBER A
    		, MANAGER M
		WHERE A.USER_ID = M.USER_ID

	</select>
 
 <select id="userinfo" resultMap="memberResultMap">
		
		 SELECT
			    A.USER_ID
        	  , A.USER_NAME
        	  , A.EMAIL
        	  , A.BIRTH
       	  	  , A.GENDER
        	  , A.WARN_COUNT
        	  , A.QUIT_YN
        	  , A.MEM_TYPE
       	      , A.MEM_PHONE
       	      , A.INTRODUCE
       	      , A.FAVORITE_ACTI
       	      , A.ENTER_DATE
		 FROM  MEMBER A
		WHERE USER_ID = #{userId}
	</select>
 
 
 </mapper>